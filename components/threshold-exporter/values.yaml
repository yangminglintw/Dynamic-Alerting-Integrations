# Default values for threshold-exporter
replicaCount: 1

image:
  repository: threshold-exporter
  tag: dev
  pullPolicy: Never    # Local dev: use 'kind load docker-image'

service:
  type: ClusterIP
  port: 8080
  annotations:
    prometheus.io/scrape: "true"
    prometheus.io/port: "8080"
    prometheus.io/path: "/metrics"

# Exporter runtime config
exporter:
  listenAddr: ":8080"
  reloadInterval: "30s"    # How often to check config file for changes

# Threshold config (embedded in ConfigMap)
# This is the actual alerting threshold configuration.
# See config/threshold-config.yaml for the reference format.
thresholdConfig:
  defaults:
    mysql_connections: 80
    mysql_cpu: 80
  tenants:
    db-a:
      mysql_connections: "70"
    db-b:
      mysql_connections: "100"
      mysql_cpu: "60"

resources:
  requests:
    cpu: 50m
    memory: 64Mi
  limits:
    cpu: 200m
    memory: 128Mi

livenessProbe:
  httpGet:
    path: /health
    port: http
  initialDelaySeconds: 10
  periodSeconds: 10

readinessProbe:
  httpGet:
    path: /ready
    port: http
  initialDelaySeconds: 5
  periodSeconds: 5
